{% comment %}
  Hero section with background video, three CTA buttons, and testimonial block
{% endcomment %}

<section class="ovo-hero" style="position: relative; max-height: 550px; min-height: 450px; display: flex; align-items: center; overflow: hidden;">
  {% if section.settings.background_video != blank %}
    <div class="ovo-hero__video" style="position: absolute; inset: 0; z-index: 1; overflow: hidden;">
      <video 
        autoplay 
        loop 
        muted 
        playsinline 
        style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); min-width: 100%; min-height: 100%;">
        {% for source in section.settings.background_video.sources %}
          <source src="{{ source.url }}" type="{{ source.mime_type }}">
        {% endfor %}
      </video>
      <div style="position: absolute; inset: 0; background: linear-gradient(to right, rgba(1, 21, 34, 0.85) 0%, rgba(1, 21, 34, 0.75) 50%, rgba(1, 21, 34, 0.6) 100%);"></div>
    </div>
  {% elsif section.settings.background_image != blank %}
    <div class="ovo-hero__image" style="position: absolute; inset: 0; z-index: 1; background-image: url('{{ section.settings.background_image | img_url: '1920x' }}'); background-size: cover; background-position: center;">
      <div style="position: absolute; inset: 0; background: linear-gradient(to right, rgba(1, 21, 34, 0.85) 0%, rgba(1, 21, 34, 0.75) 50%, rgba(1, 21, 34, 0.6) 100%);"></div>
    </div>
  {% else %}
    <div style="position: absolute; inset: 0; z-index: 1; background: radial-gradient(circle at top left, #013043, var(--ovo-navy));"></div>
  {% endif %}

  <div class="ovo-page-width" style="position: relative; z-index: 2; width: 100%; padding: 6rem 1.5rem; display: grid; grid-template-columns: 2fr 1fr; gap: 3rem; align-items: center;">
    {% comment %} Left side - Main content {% endcomment %}
    <div class="ovo-hero__content" style="color: #ffffff;">
      {% if section.settings.kicker != blank %}
        <div class="ovo-heading-sm" style="opacity: 0.9; margin-bottom: 0.75rem;">
          {{ section.settings.kicker }}
        </div>
      {% endif %}
      
      {% if section.settings.heading != blank %}
        <h1 class="ovo-heading-xl" style="margin: 0; line-height: 1.1;">
          {{ section.settings.heading }}
        </h1>
      {% endif %}

      {% if section.settings.heading_sub != blank %}
        <h2 class="ovo-heading-sub" style="font-family: 'Playfair Display', serif; font-size: clamp(2rem, 4vw, 3rem); font-style: italic; font-weight: 400; margin: 0.5rem 0 0; line-height: 1.2;">
          {{ section.settings.heading_sub }}
        </h2>
      {% endif %}

      {% if section.settings.body != blank %}
        <p class="ovo-body" style="margin-top: 1.5rem; max-width: 500px; opacity: 0.95;">
          {{ section.settings.body }}
        </p>
      {% endif %}

      {% comment %} Three CTA Buttons {% endcomment %}
      <div class="ovo-hero__ctas" style="display: flex; gap: 1rem; margin-top: 2rem; flex-wrap: wrap;">
        {% for block in section.blocks %}
          {% if block.type == 'cta_button' %}
            {% if block.settings.label != blank %}
              {% assign button_link = block.settings.link %}
              {% if button_link == blank %}
                {% assign button_link = '#' %}
              {% endif %}
              <a href="{{ button_link }}" 
                 class="ovo-hero__cta ovo-button" 
                 style="{% if block.settings.style == 'primary' %}background: var(--ovo-coral); color: #ffffff;{% elsif block.settings.style == 'secondary' %}background: var(--ovo-teal); color: #ffffff;{% else %}background: transparent; border: 1px solid rgba(255,255,255,0.5); color: #ffffff;{% endif %}">
                {{ block.settings.label }}
              </a>
            {% endif %}
          {% endif %}
        {% endfor %}
      </div>
    </div>

    {% comment %} Right side - Testimonial block {% endcomment %}
    {% for block in section.blocks %}
      {% if block.type == 'testimonial' %}
        <div class="ovo-hero__testimonial" style="background: var(--ovo-teal); padding: 2.5rem; border-radius: 20px; color: #ffffff;">
          {% if block.settings.logo != blank %}
            <div style="margin-bottom: 1.5rem;">
              <img src="{{ block.settings.logo | img_url: '200x' }}" alt="{{ block.settings.source | escape }}" style="max-height: 60px; width: auto;">
            </div>
          {% endif %}
          
          {% if block.settings.quote != blank %}
            <div class="ovo-heading-lg" style="font-size: clamp(1.3rem, 2.5vw, 1.8rem); line-height: 1.3; margin-bottom: 1rem;">
              {{ block.settings.quote }}
            </div>
          {% endif %}

          {% if block.settings.body != blank %}
            <p class="ovo-body" style="font-size: 0.95rem; opacity: 0.95; margin-bottom: 1rem;">
              {{ block.settings.body }}
            </p>
          {% endif %}

          {% if block.settings.byline != blank %}
            <div style="font-size: 0.85rem; opacity: 0.9; text-transform: uppercase; letter-spacing: 0.1em; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.2);">
              {{ block.settings.byline }}
            </div>
          {% endif %}
        </div>
      {% endif %}
    {% endfor %}
  </div>
</section>

{% schema %}
{
  "name": "Hero – Video & CTAs",
  "tag": "section",
  "class": "section",
  "templates": ["index", "page", "product"],
  "settings": [
    {
      "type": "text",
      "id": "kicker",
      "label": "Kicker",
      "default": "Award-winning, ultra-premium, gluten-free vodka."
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Main heading",
      "default": "The official vodka"
    },
    {
      "type": "text",
      "id": "heading_sub",
      "label": "Sub heading (italic)",
      "default": "of cleaner oceans"
    },
    {
      "type": "textarea",
      "id": "body",
      "label": "Body text"
    },
    {
      "type": "video",
      "id": "background_video",
      "label": "Background video",
      "info": "Upload an MP4 video file. It will autoplay, loop, and be muted."
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background image (fallback if no video)"
    }
  ],
  "blocks": [
    {
      "type": "cta_button",
      "name": "CTA Button",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Button label",
          "default": "BUY ONLINE"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Button link"
        },
        {
          "type": "select",
          "id": "style",
          "label": "Button style",
          "options": [
            {
              "value": "primary",
              "label": "Primary (Coral)"
            },
            {
              "value": "secondary",
              "label": "Secondary (Teal)"
            },
            {
              "value": "outline",
              "label": "Outline (White)"
            }
          ],
          "default": "primary"
        }
      ]
    },
    {
      "type": "testimonial",
      "name": "Testimonial",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "logo",
          "label": "Logo/Source image"
        },
        {
          "type": "text",
          "id": "quote",
          "label": "Quote/Headline"
        },
        {
          "type": "textarea",
          "id": "body",
          "label": "Body text"
        },
        {
          "type": "text",
          "id": "byline",
          "label": "Byline/Source"
        }
      ]
    }
  ],
  "max_blocks": 4,
  "presets": [
    {
      "name": "Hero – Video & CTAs",
      "blocks": [
        {
          "type": "cta_button",
          "settings": {
            "label": "BUY ONLINE",
            "style": "primary"
          }
        },
        {
          "type": "cta_button",
          "settings": {
            "label": "FIND NEAR YOU",
            "style": "secondary"
          }
        },
        {
          "type": "cta_button",
          "settings": {
            "label": "LOCAL DELIVERY",
            "style": "outline"
          }
        },
        {
          "type": "testimonial"
        }
      ]
    }
  ]
}
{% endschema %}
