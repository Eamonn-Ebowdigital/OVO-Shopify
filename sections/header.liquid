{% comment %}
  Header with logo, navigation and optional Buy Online button.
{% endcomment %}

<header class="ovo-header" role="banner" style="position: sticky; top: 0; z-index: 100; background: #ffffff; backdrop-filter: blur(10px); padding: 1rem 0; border-bottom: 1px solid rgba(0,0,0,0.1);">
  <div class="ovo-page-width" style="display: flex; align-items: center; justify-content: space-between; gap: 1.5rem;">
    <div style="display:flex; align-items:center; gap:0.75rem;">
      {% if section.settings.logo != blank %}
        <a href="{{ routes.root_url }}">
          <img src="{{ section.settings.logo | img_url: '200x' }}" alt="{{ shop.name | escape }}" style="height:48px; width:auto;">
        </a>
      {% else %}
        <a href="{{ routes.root_url }}" class="ovo-heading-sm" style="color: var(--ovo-text);">{{ shop.name }}</a>
      {% endif %}
    </div>

    <nav class="header__nav" role="navigation">
      <ul style="display:flex; gap:1.5rem; list-style:none; margin:0; padding:0; font-size:0.9rem; text-transform:uppercase; letter-spacing:0.16em; color: var(--ovo-text); font-family: var(--heading-font-family, 'Josefin Sans', sans-serif);">
        {% if section.settings.menu != blank %}
          {% for link in section.settings.menu.links %}
            <li>
              <a href="{{ link.url }}" style="color: inherit;">{{ link.title }}</a>
            </li>
          {% endfor %}
        {% else %}
          <li><a href="/" style="color: inherit;">Home</a></li>
          <li><a href="/about" style="color: inherit;">About</a></li>
          <li><a href="/cocktails" style="color: inherit;">Cocktails</a></li>
          <li><a href="/news" style="color: inherit;">News</a></li>
          <li><a href="/contact" style="color: inherit;">Contact</a></li>
        {% endif %}
      </ul>
    </nav>

    <div style="display:flex; align-items:center; gap:1rem;">
      {% if section.settings.enable_search %}
        <a href="{{ routes.search_url }}" class="header__search" aria-label="Search" style="color: var(--ovo-text); font-size: 1.2rem; text-decoration: none;">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: inline-block; vertical-align: middle;">
            <path d="M9 17C13.4183 17 17 13.4183 17 9C17 4.58172 13.4183 1 9 1C4.58172 1 1 4.58172 1 9C1 13.4183 4.58172 17 9 17Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M19 19L14.65 14.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
      {% endif %}

      {% if section.settings.enable_cart %}
        <a href="{{ routes.cart_url }}" class="header__cart" aria-label="Cart" style="color: var(--ovo-text); font-size: 1.2rem; text-decoration: none; position: relative;">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: inline-block; vertical-align: middle;">
            <path d="M5 5H17L16 12H6L5 5ZM5 5L4 2H2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="8" cy="17" r="1" fill="currentColor"/>
            <circle cx="15" cy="17" r="1" fill="currentColor"/>
          </svg>
          {% if cart.item_count > 0 %}
            <span class="header__cart-count" style="position: absolute; top: -8px; right: -8px; background: var(--ovo-coral); color: #ffffff; border-radius: 50%; width: 18px; height: 18px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 600;">
              {{ cart.item_count }}
            </span>
          {% endif %}
        </a>
      {% endif %}

      {% if section.settings.buy_online_link != blank %}
        <a href="{{ section.settings.buy_online_link }}" class="ovo-button header__cta-button">
          {{ section.settings.buy_online_label | default: "Buy online" }}
        </a>
      {% endif %}
      {% if section.settings.find_near_you_link != blank %}
        <a href="{{ section.settings.find_near_you_link }}" class="ovo-button ovo-button--ghost header__cta-button">
          {{ section.settings.find_near_you_label | default: "Find near you" }}
        </a>
      {% endif %}
      
      {% comment %} Mobile menu button {% endcomment %}
      <button class="header__menu-toggle" aria-label="Toggle menu" style="display: none; background: none; border: none; color: var(--ovo-text); font-size: 1.5rem; cursor: pointer;">
        ☰
      </button>
    </div>
  </div>
  
  {% comment %} Mobile menu {% endcomment %}
  <nav class="header__mobile-nav" role="navigation" style="display: none; padding: 1rem 0; border-top: 1px solid rgba(0,0,0,0.1); background: #ffffff;">
    <ul style="list-style:none; margin:0; padding:0; display:flex; flex-direction: column; gap:1rem;">
      {% if section.settings.menu != blank %}
        {% for link in section.settings.menu.links %}
          <li>
            <a href="{{ link.url }}" style="color: var(--ovo-text); text-transform:uppercase; letter-spacing:0.16em; font-family: var(--heading-font-family, 'Josefin Sans', sans-serif);">{{ link.title }}</a>
          </li>
        {% endfor %}
      {% endif %}
    </ul>
  </nav>
</header>

<style>
  .header__search,
  .header__cart {
    transition: opacity 0.2s;
  }
  
  .header__search:hover,
  .header__cart:hover {
    opacity: 0.8;
  }

  @media (min-width: 768px) {
    .header__nav { display: flex !important; }
    .header__mobile-nav { display: none !important; }
    .header__menu-toggle { display: none !important; }
    .header__cta-button { display: inline-flex !important; }
    .header__search,
    .header__cart {
      display: inline-block !important;
    }
  }
  
  @media (max-width: 767px) {
    .header__nav { display: none !important; }
    .header__cta-button { display: none !important; }
    .header__menu-toggle { display: block !important; }
    .header__search,
    .header__cart {
      display: inline-block !important;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.querySelector('.header__menu-toggle');
    const mobileNav = document.querySelector('.header__mobile-nav');
    
    if (menuToggle && mobileNav) {
      menuToggle.addEventListener('click', function() {
        const isOpen = mobileNav.style.display === 'block';
        mobileNav.style.display = isOpen ? 'none' : 'block';
        menuToggle.textContent = isOpen ? '☰' : '✕';
      });
    }
  });
</script>

{% schema %}
{
  "name": "Header",
  "tag": "header",
  "class": "section-header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    },
    {
      "type": "checkbox",
      "id": "enable_search",
      "label": "Show search icon",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_cart",
      "label": "Show cart icon",
      "default": true
    },
    {
      "type": "url",
      "id": "buy_online_link",
      "label": "Buy online link"
    },
    {
      "type": "text",
      "id": "buy_online_label",
      "label": "Buy online label",
      "default": "Buy online"
    },
    {
      "type": "url",
      "id": "find_near_you_link",
      "label": "Find near you link"
    },
    {
      "type": "text",
      "id": "find_near_you_label",
      "label": "Find near you label",
      "default": "Find near you"
    }
  ],
  "blocks": []
}
{% endschema %}
